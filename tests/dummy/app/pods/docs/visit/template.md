# Visit helper

The `visit` helper is the main API behind this addon. This function allows you to render a page generated by FastBoot into Ember's testing container.

```js
import { module, test } from 'qunit';
import { setup, visit } from 'ember-cli-fastboot-testing/test-support';

module('FastBoot | home-page test', function(hooks) {
  setup(hooks);

  test('it renders a page...', async function(assert) {
    await visit('/');

    // ...
  });

});
```

## Options

Visit can take an optional second parameter that lets you control the request sent to FastBoot. Many FastBoot applications will have conditional logic based on the incoming HTTP request. For example, you may want to render a different template based on the requesting browser's user agent.

### HTTP Headers

We can generate a FastBoot request with different HTTP headers using `visit`'s options.

```js
import { module, test } from 'qunit';
import { setup, visit } from 'ember-cli-fastboot-testing/test-support';

module('FastBoot | home-page test', function(hooks) {
  setup(hooks);

  test('it renders a page when given a specific user-agent', async function(assert) {
    await visit('/', {
      headers: {
        'user-agent': 'A crawling bot!'
      }
    });

    // ...
  });

});
```

The headers object can be configured with any HTTP header. You can change the hostname or set a logged in user cookie.

```js
await visit('/', {
  headers: {
    'cookie': 'user_id=what-12345;'
    'host': 'example.com'
  }
});
```
